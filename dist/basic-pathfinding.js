!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";var o=function(){return function(t,e){this.x=t,this.y=e}}();e.a=o},function(t,e,n){"use strict";var o;n.d(e,"a",function(){return o}),function(t){t[t.cardinal=0]="cardinal",t[t.hex=1]="hex",t[t.intercardinal=2]="intercardinal"}(o||(o={}));var r=function(){function t(t){var e=t.tiles,n=void 0===e?[]:e,r=t.walkableTiles,i=void 0===r?[]:r,s=t.type,a=void 0===s?o.cardinal:s;this.costs=new Map,this.extraCosts=new Map,this.unwalkableCoords=new Map,this.unstoppableCoords=new Map,this.type=a,this.pTiles=[],this.tiles=n,this.walkableTiles=i}return t.toCoordMap=function(t,e,n){return void 0===e&&(e=new Map),void 0===n&&(n=!0),t.forEach(function(t){var o=t.x,r=t.y;e.has(r)||e.set(r,new Map),e.get(r).set(o,n)}),e},Object.defineProperty(t.prototype,"tiles",{get:function(){return this.pTiles},set:function(t){this.pTiles=t;for(var e=0,n=t;e<n.length;e++){var o=n[e];for(var r in o)this.costs.get(o[r])||this.costs.set(o[r],1)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCardinal",{get:function(){return this.type===o.cardinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isHex",{get:function(){return this.type===o.hex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isIntercardinal",{get:function(){return this.type===o.intercardinal},enumerable:!0,configurable:!0}),t.prototype.inGrid=function(t,e){return t>=0&&e>=0&&e<this.tiles.length&&t<this.tiles[e].length},t.prototype.isCoordStoppable=function(t,e){return!(this.unstoppableCoords.has(e)&&this.unstoppableCoords.get(e).has(t))&&this.isCoordWalkable(t,e)},t.prototype.isCoordWalkable=function(t,e){return!(this.unwalkableCoords.has(e)&&this.unwalkableCoords.get(e).has(t))&&-1!==this.walkableTiles.indexOf(this.tiles[e][t])},t.prototype.getCoordCost=function(t,e){return this.extraCosts.has(e)&&this.extraCosts.get(e).get(t)||this.costs.get(this.tiles[e][t])},t.prototype.setTileCost=function(t,e){this.costs.set(t,e)},t.prototype.addExtraCost=function(t,e,n){this.addCoord(this.extraCosts,t,e,n)},t.prototype.removeExtraCost=function(t,e){this.removeCoord(this.extraCosts,t,e)},t.prototype.clearExtraCosts=function(){this.clearCoords(this.extraCosts)},t.prototype.addUnwalkableCoord=function(t,e){this.addCoord(this.unwalkableCoords,t,e)},t.prototype.removeUnwalkableCoord=function(t,e){this.removeCoord(this.unwalkableCoords,t,e)},t.prototype.clearUnwalkableCoords=function(){this.clearCoords(this.unwalkableCoords)},t.prototype.addUnstoppableCoord=function(t,e){this.addCoord(this.unstoppableCoords,t,e)},t.prototype.removeUnstoppableCoord=function(t,e){this.removeCoord(this.unstoppableCoords,t,e)},t.prototype.clearUnstoppableCoords=function(){this.clearCoords(this.unstoppableCoords)},t.prototype.addCoord=function(t,e,n,o){void 0===o&&(o=!0),t.has(n)||t.set(n,new Map),t.get(n).set(e,o)},t.prototype.removeCoord=function(t,e,n){t.has(n)&&t.get(n).delete(e)},t.prototype.clearCoords=function(t){t.clear()},t}();e.b=r},function(t,e,n){"use strict";var o=n(0),r=n(7),i=function(){function t(t){var e=t.startX,n=t.startY,o=t.endX,i=t.endY,s=t.costThreshold;this.startX=e,this.startY=n,this.endX=o,this.endY=i,this.costThreshold=s,this.cache=new Map,this.nodeQueue=new r(function(t,e){return t.guessTotalCost-e.guessTotalCost})}return Object.defineProperty(t.prototype,"traversedNodes",{get:function(){var t=[];return this.cache.forEach(function(e,n){e.forEach(function(e,r){t.push(new o.a(r,n))})}),t},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.nodeQueue.push(t)},t.prototype.cacheNode=function(t){this.cache.get(t.y).set(t.x,t)},t}();e.a=i},function(t,e,n){"use strict";var o=n(0),r=function(){function t(t){var e=t.parent,n=t.x,o=t.y,r=t.cost,i=t.distanceToTarget;this.parent=e,this.x=n,this.y=o,this.cost=r,this.distanceToTarget=i,this.visited=!1}return Object.defineProperty(t.prototype,"guessTotalCost",{get:function(){return this.cost+this.distanceToTarget},enumerable:!0,configurable:!0}),t.prototype.formatPath=function(){var t=[];t.push(new o.a(this.x,this.y));for(var e=this.parent;e;)t.push(new o.a(e.x,e.y)),e=e.parent;return t.reverse(),t},t}();e.a=r},function(t,e,n){"use strict";var o=n(0),r=n(3),i=n(2),s=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((o=o.apply(t,e||[])).next())})},a=function(t,e){var n,o,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u=function(){function t(){}return t.findPath=function(e,n,o,r,u,c){return s(this,void 0,void 0,function(){var s,l,p;return a(this,function(a){switch(a.label){case 0:return n===r&&o===u?[2,[]]:e.isCoordStoppable(r,u)?(s=new i.a({costThreshold:c,endX:r,endY:u,startX:n,startY:o}),l=t.coordinateToNode(s,null,n,o,0),s.push(l),[4,t.calculate(s,e)]):[2,null];case 1:return a.sent(),[2,(p=s.nodeQueue.pop())?p.formatPath():null]}})})},t.findWalkable=function(e,n,r){return s(this,void 0,void 0,function(){var s,u,c,l;return a(this,function(a){switch(a.label){case 0:return n=n instanceof Array?n:[n],s=n[0],u=s.x,c=s.y,l=new i.a({costThreshold:r,startX:u,startY:c}),n.forEach(function(e){var n=e.x,o=e.y,r=t.coordinateToNode(l,null,n,o,0);l.push(r)}),[4,t.calculate(l,e)];case 1:return a.sent(),[2,l.traversedNodes.filter(function(t){return e.isCoordStoppable(t.x,t.y)}).map(function(t){return new o.a(t.x,t.y)})]}})})},t.calculate=function(e,n){return new Promise(function(o){for(;;){if(0===e.nodeQueue.size())return void o(e);var r=e.nodeQueue.peek();if(e.endX===r.x&&e.endY===r.y)return void o(e);(r=e.nodeQueue.pop()).visited=!0,n.inGrid(r.x,r.y-1)&&t.checkAdjacentNode(e,n,r,0,-1),!n.isCardinal&&n.inGrid(r.x+1,r.y-1)&&t.checkAdjacentNode(e,n,r,1,-1),n.inGrid(r.x+1,r.y)&&t.checkAdjacentNode(e,n,r,1,0),n.isIntercardinal&&n.inGrid(r.x+1,r.y+1)&&t.checkAdjacentNode(e,n,r,1,1),n.inGrid(r.x,r.y+1)&&t.checkAdjacentNode(e,n,r,0,1),!n.isCardinal&&n.inGrid(r.x-1,r.y+1)&&t.checkAdjacentNode(e,n,r,-1,1),n.inGrid(r.x-1,r.y)&&t.checkAdjacentNode(e,n,r,-1,0),n.isIntercardinal&&n.inGrid(r.x-1,r.y-1)&&t.checkAdjacentNode(e,n,r,-1,-1)}})},t.checkAdjacentNode=function(e,n,o,r,i){var s=o.x+r,a=o.y+i,u=n.getCoordCost(s,a);if(n.isCoordWalkable(s,a)&&t.canAfford(o,u,e.costThreshold)){var c=t.coordinateToNode(e,o,s,a,u);c.visited?o.cost+u<c.cost&&(c.cost=o.cost+u,c.parent=o,e.nodeQueue.updateItem(c)):e.push(c)}},t.canAfford=function(t,e,n){return null==n||t.cost+e<=n},t.coordinateToNode=function(e,n,o,i,s){if(e.cache.has(i)){if(e.cache.get(i).has(o))return e.cache.get(i).get(o)}else e.cache.set(i,new Map);var a=new r.a({cost:n?n.cost+s:s,distanceToTarget:e.endX&&e.endY?t.getDistance(o,i,e.endX,e.endY):1,parent:n,x:o,y:i});return e.cacheNode(a),a},t.getDistance=function(t,e,n,o){return Math.abs(t-n)+Math.abs(e-o)},t}();e.a=u},function(t,e,n){"use strict";n.r(e),function(t){var o=n(0);n.d(e,"Coord",function(){return o.a});var r=n(1);n.d(e,"Grid",function(){return r.b}),n.d(e,"GridType",function(){return r.a});var i=n(3);n.d(e,"Node",function(){return i.a});var s=n(4);n.d(e,"Pathfinding",function(){return s.a});var a=n(2);n.d(e,"Search",function(){return a.a}),e.default=s.a,t&&(t.BasicPathfinding={Pathfinding:s.a,Coord:o.a,Grid:r.b,GridType:r.a,Node:i.a,Search:a.a})}.call(this,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n(8)},function(t,e,n){var o,r,i;(function(){var n,s,a,u,c,l,p,d,f,h,y,v,b,g,C;a=Math.floor,h=Math.min,s=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,n,o,r){var i;if(null==n&&(n=0),null==r&&(r=s),n<0)throw new Error("lo must be non-negative");for(null==o&&(o=t.length);n<o;)r(e,t[i=a((n+o)/2)])<0?o=i:n=i+1;return[].splice.apply(t,[n,n-n].concat(e)),e},l=function(t,e,n){return null==n&&(n=s),t.push(e),g(t,0,t.length-1,n)},c=function(t,e){var n,o;return null==e&&(e=s),n=t.pop(),t.length?(o=t[0],t[0]=n,C(t,0,e)):o=n,o},d=function(t,e,n){var o;return null==n&&(n=s),o=t[0],t[0]=e,C(t,0,n),o},p=function(t,e,n){var o;return null==n&&(n=s),t.length&&n(t[0],e)<0&&(e=(o=[t[0],e])[0],t[0]=o[1],C(t,0,n)),e},u=function(t,e){var n,o,r,i,u,c;for(null==e&&(e=s),u=[],o=0,r=(i=function(){c=[];for(var e=0,n=a(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)c.push(e);return c}.apply(this).reverse()).length;o<r;o++)n=i[o],u.push(C(t,n,e));return u},b=function(t,e,n){var o;if(null==n&&(n=s),-1!==(o=t.indexOf(e)))return g(t,0,o,n),C(t,o,n)},y=function(t,e,n){var o,r,i,a,c;if(null==n&&(n=s),!(r=t.slice(0,e)).length)return r;for(u(r,n),i=0,a=(c=t.slice(e)).length;i<a;i++)o=c[i],p(r,o,n);return r.sort(n).reverse()},v=function(t,e,n){var o,r,i,a,l,p,d,y,v;if(null==n&&(n=s),10*e<=t.length){if(!(i=t.slice(0,e).sort(n)).length)return i;for(r=i[i.length-1],a=0,p=(d=t.slice(e)).length;a<p;a++)n(o=d[a],r)<0&&(f(i,o,0,null,n),i.pop(),r=i[i.length-1]);return i}for(u(t,n),v=[],l=0,y=h(e,t.length);0<=y?l<y:l>y;0<=y?++l:--l)v.push(c(t,n));return v},g=function(t,e,n,o){var r,i,a;for(null==o&&(o=s),r=t[n];n>e&&o(r,i=t[a=n-1>>1])<0;)t[n]=i,n=a;return t[n]=r},C=function(t,e,n){var o,r,i,a,u;for(null==n&&(n=s),r=t.length,u=e,i=t[e],o=2*e+1;o<r;)(a=o+1)<r&&!(n(t[o],t[a])<0)&&(o=a),t[e]=t[o],o=2*(e=o)+1;return t[e]=i,g(t,u,e,n)},n=function(){function t(t){this.cmp=null!=t?t:s,this.nodes=[]}return t.push=l,t.pop=c,t.replace=d,t.pushpop=p,t.heapify=u,t.updateItem=b,t.nlargest=y,t.nsmallest=v,t.prototype.push=function(t){return l(this.nodes,t,this.cmp)},t.prototype.pop=function(){return c(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return d(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return p(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return u(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return b(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(o=function(){return n})?o.apply(e,r):o)||(t.exports=i)}).call(this)}]);